{"version":3,"sources":["../../src/app/routes.js"],"names":["app","exphbs","seo_title","use","req","res","next","info","Date","originalUrl","get","render","page_title","post","VerifyResponse","session","userid","body","g_recaptcha_response","err","result","json","end","require","http500","http404"],"mappings":"AAAA;;;;;;AAMA;;;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;;;kBACe,UAACA,GAAD,EAAMC,MAAN,EAAgB;;AAE3B,QAAMC,YAAY,oCAAlB;AACAF,QAAIG,GAAJ,CAAQ,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACxB,yBAAOC,IAAP,CAAa,IAAIC,IAAJ,EAAD,GAAe,YAA3B,EAAyCJ,IAAIK,WAA7C;AACAH;AACH,KAHD;;AAKA;AACAN,QAAIU,GAAJ,CAAQ,GAAR,EAAc,UAACN,GAAD,EAAMC,GAAN,EAAc;AACxBA,YAAIM,MAAJ,CAAW,4BAAX,EACI;AACAC,wBAAY,oBAAoBV;AADhC,SADJ;AAIH,KALD;;AAOAF,QAAIU,GAAJ,CAAQ,qBAAR,EAA+B,UAACN,GAAD,EAAMC,GAAN,EAAc;;AAEzCA,YAAIM,MAAJ,CAAW,4BAAX,EACI,EAAEC,YAAY,oBAAoBV,SAAlC,EADJ;AAEH,KAJD;;AAMAF,QAAIU,GAAJ,CAAQ,aAAR,EAAuB,UAACN,GAAD,EAAMC,GAAN,EAAc;AACjCA,YAAIM,MAAJ,CAAW,oBAAX,EAAiC,EAAEC,YAAY,gBAAgBV,SAA9B,EAAjC;AACH,KAFD;;AAIAF,QAAIU,GAAJ,CAAQ,eAAR,EAAyB,UAACN,GAAD,EAAMC,GAAN,EAAc;AACnCA,YAAIM,MAAJ,CAAW,qBAAX,EAAkC,EAACC,YAAY,kBAAkBV,SAA/B,EAAlC;AACH,KAFD;;AAIAF,QAAIU,GAAJ,CAAQ,UAAR,EAAoB,UAACN,GAAD,EAAMC,GAAN,EAAc;AAC9BA,YAAIM,MAAJ,CAAW,gBAAX,EAA6B,EAAEC,YAAY,YAAYV,SAA1B,EAA7B;AACH,KAFD;;AAIAF,QAAIU,GAAJ,CAAQ,MAAR,EAAgB,UAACN,GAAD,EAAMC,GAAN,EAAc;AAC1BA,YAAIM,MAAJ,CAAW,YAAX,EAAyB,EAAEC,YAAY,SAASV,SAAvB,EAAzB;AACH,KAFD;;AAIA;AACAF,QAAIa,IAAJ,CAAS,YAAT,EAAuB,UAACT,GAAD,EAAMC,GAAN,EAAc;AACjC,yBAAOS,cAAP,CACIV,IAAIW,OAAJ,CAAYC,MADhB,EAEMZ,IAAIa,IAAJ,CAASC,oBAFf,EAGO,UAACC,GAAD,EAAMC,MAAN,EAAiB;AAChB,gBAAID,GAAJ,EAAS;AACLd,oBAAIgB,IAAJ,CAASF,GAAT;AACH,aAFD,MAGK;AACDd,oBAAIgB,IAAJ,CAASD,MAAT;AACH;AACDf,gBAAIiB,GAAJ;AACP,SAXD;AAYH,KAbD;AAcA;AACAtB,QAAIG,GAAJ,CAAQoB,QAAQ,oBAAR,EAA8BC,OAAtC;AACAxB,QAAIG,GAAJ,CAAQoB,QAAQ,oBAAR,EAA8BE,OAAtC;AACH,C","file":"routes.js","sourcesContent":["/**\r\n * Copyright 2014 Node Dice.\r\n *\r\n * Created by Neo on 12/12/2014\r\n */\r\n\r\n'use strict';\r\n\r\nimport config from '../config';\r\nimport faucet from './faucet.js';\r\nimport session from 'express-session';\r\nimport logger from './helper/logger';\r\nexport default (app, exphbs)=> {\r\n    \r\n    const seo_title = 'bit coin btc nxt altcoin dice game';\r\n    app.use((req, res, next) => {\r\n        logger.info((new Date()) + ' Request: ', req.originalUrl);\r\n        next();\r\n    });\r\n    \r\n    //default page\r\n    app.get('/',  (req, res) => {\r\n        res.render('./games/Roll_Over_Or_Under', \r\n            {\r\n            page_title: 'Over or Under? ' + seo_title\r\n        });\r\n    });\r\n\r\n    app.get('/Roll_Over_Or_Under', (req, res) => {\r\n         \r\n        res.render('./games/Roll_Over_Or_Under',\r\n            { page_title: 'Over or Under? ' + seo_title });\r\n    });\r\n    \r\n    app.get('/Investment', (req, res) => {\r\n        res.render('./games/Investment', { page_title: 'Investment ' + seo_title });\r\n    });\r\n\r\n    app.get('/Verification', (req, res) => {\r\n        res.render('./http/Verification', {page_title: 'Verification ' + seo_title});\r\n    });\r\n    \r\n    app.get('/Support', (req, res) => {\r\n        res.render('./http/Support', { page_title: 'Support' + seo_title });\r\n    });\r\n    \r\n    app.get('/faq', (req, res) => {\r\n        res.render('./http/faq', { page_title: 'Faq ' + seo_title });\r\n    });\r\n    \r\n    //verify the response and return new balance if succeeded.\r\n    app.post('/reCaptCha', (req, res) => {\r\n        faucet.VerifyResponse(\r\n            req.session.userid\r\n            , req.body.g_recaptcha_response \r\n            ,  (err, result) => {\r\n                if (err) { \r\n                    res.json(err);\r\n                }\r\n                else {\r\n                    res.json(result);\r\n                }\r\n                res.end();\r\n        });\r\n    });\r\n    //error handler\r\n    app.use(require('./views/http/index').http500);\r\n    app.use(require('./views/http/index').http404);\r\n};\r\n"]}